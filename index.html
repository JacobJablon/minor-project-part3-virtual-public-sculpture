<!DOCTYPE html>
<html>

<head>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <!-- Geolocation features -->
    <script type='text/javascript'
        src='https://raw.githack.com/AR-js-org/AR.js/3.4.5/three.js/build/ar-threex-location-only.js'></script>
    <!-- we use three.js to handle raycasting -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex.js"></script>
    <!-- AR.js A-Frame components -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <title>Simple AR Scene</title>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs vr-mode-ui="enabled: false" raycaster cursor="rayOrigin: mouse" renderer="antialias: true; alpha: true" id="scene">
        <a-camera gps-new-camera='gpsMinDistance: 5'></a-camera>


<!-- GPS COORDS FOR RITTER: gps-new-entity-place="latitude: 43.084933; longitude: -77.673909" -->
<!-- NO LOCATION BASED AR: id="everything-container" rotation="0 90 0" position="0 -50 -250" -->
        <a-entity
            gps-new-entity-place="latitude: 43.08530815078381; longitude: -77.67391578912081">
            <a-entity
            position="0 -40 -220">
                <a-entity
                    id="bookshelf-container-1">
                    <a-entity
                        gltf-model="bookshelf/scene.gltf"
                        scale="10 10 10"
                        position="-40 0 -30"
                        animation="property: position; from: -40 0 -30; to: 40 0 -30; dur: 5000; easing: linear; loop: true; easing: easeInOutCirc; dir: alternate">
                    </a-entity>
                    <a-entity
                        gltf-model="bookshelf/scene.gltf"
                        scale="10 10 10"
                        position="-40 0 -60"
                        animation="property: position; to: -40 0 -60; from: 40 0 -60; dur: 5000; easing: linear; loop: true; easing: easeInOutCirc; dir: alternate">
                    </a-entity>
                    <a-entity
                        gltf-model="bookshelf/scene.gltf"
                        scale="10 10 10"
                        position="-40 0 -90"
                        animation="property: position; from: -40 0 -90; to: 40 0 -90; dur: 5000; easing: linear; loop: true; easing: easeInOutCirc; dir: alternate">
                    </a-entity>
                </a-entity>
                <a-entity
                    id="bookshelf-container-2"
                    rotation="0 180 0">
                    <a-entity
                        gltf-model="bookshelf/scene.gltf"
                        scale="10 10 10"
                        position="-40 0 -30"
                        animation="property: position; from: -40 0 -30; to: 40 0 -30; dur: 5000; easing: linear; loop: true; easing: easeInOutCirc; dir: alternate">
                    </a-entity>
                    <a-entity
                        gltf-model="bookshelf/scene.gltf"
                        scale="10 10 10"
                        position="-40 0 -60"
                        animation="property: position; to: -40 0 -60; from: 40 0 -60; dur: 5000; easing: linear; loop: true; easing: easeInOutCirc; dir: alternate">
                    </a-entity>
                    <a-entity
                        gltf-model="bookshelf/scene.gltf"
                        scale="10 10 10"
                        position="-40 0 -90"
                        animation="property: position; from: -40 0 -90; to: 40 0 -90; dur: 5000; easing: linear; loop: true; easing: easeInOutCirc; dir: alternate">
                    </a-entity>
                </a-entity>

                <a-entity
                    id="books-container"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear">
                    <!-- <a-entity
                        gltf-model="flower-book/scene.gltf"
                        scale="1 1 1"
                        rotation="90 0 0"
                        position="0 1 -40"
                        animation="property: rotation; to: 90 360 0; loop: true; dur: 2000; easing: linear">
                    </a-entity> -->
                </a-entity>
            </a-entity>
        </a-entity>
        
    </a-scene>
</body>
<script>
    // AFRAME.registerComponent('clicker', {
    //     init: function () {
    //         this.el.addEventListener('click', e => {
    //             let book = querySelectorAll("#book");
    //             book.setAttribute("animation.dur", {"dur": "1000"});
    //         });
    //     }
    // });


    let booksContainer = document.querySelector("#books-container");

    for (let i = 0; i < 40; i++) {
        let whichBook = Math.random() < 0.5 ? "basic-book" : "flower-book";

        let coordX = Math.random() < 0.5 ? Math.round(Math.random() * 20) : Math.round(Math.random() * -20);
        let coordZ = Math.random() < 0.5 ? Math.round(Math.random() * 20) : Math.round(Math.random() * -20);
        let duration = 2000 + Math.round(Math.random() * 2000);

        let booksContainerHTML = `
            <a-entity
                class="book"
                gltf-model="${whichBook}/scene.gltf"
                scale="1 1 1"
                rotation="90 0 0"
                position="${coordX} ${3 * i} ${coordZ}"
                animation="property: rotation; to: 90 360 0; loop: true; dur: ${duration}; easing: linear">
            </a-entity>
            `;

            booksContainer.innerHTML += booksContainerHTML
    };



</script>

</html>